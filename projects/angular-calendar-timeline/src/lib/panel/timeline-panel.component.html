<div class='panel-wrapper'>
  <div class='panel-label' [style.height.px]="headerHeight">
    {{label}}
  </div>

  <div class='panel'
       mwlResizable
       (resizing)='handleResize($event)'
       [resizeSnapGrid]='{right: true}'
       [style.minWidth.px]='width'>

    <ng-container *ngFor='let group of items; trackBy: trackById; let first = first'
                  [ngTemplateOutlet]='groupIterationTemplate'
                  [ngTemplateOutletContext]='{group: group, first: first, depth: 0}'>
    </ng-container>

    <ng-template #groupIterationTemplate let-group='group' let-first='first' let-depth='depth'>
      <div>
        <div [class.first-item]='first'
             [style.height.px]='rowHeight'
             [style.width.px]='width'
             [class.can-collapse]='group.items && group.items.length'
             (click)='toggleExpand(group)'
             class='panel-group'>

          <div [style.marginLeft.px]='depth * 15' class='d-flex align-items-center position-relative'>
            <i class='icon-arrow-down'
               [class.collapsed]='!group.expanded'>
            </i>

            <span class='group-name' title="{{group.name}}">{{group.name}}</span>
          </div>
        </div>

        <div *ngIf='group.expanded'>
          <ng-container *ngFor='let innerGroup of (group.items || []); trackBy: trackById;'
                        [ngTemplateOutletContext]='{group: innerGroup, first: false, depth: depth + 1}'
                        [ngTemplateOutlet]='groupIterationTemplate'
          ></ng-container>
        </div>
      </div>
    </ng-template>
  </div>
</div>
